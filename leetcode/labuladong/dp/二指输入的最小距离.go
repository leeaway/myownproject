package dp

import (
	"example.com/m/v2/tools/mathutil"
	"math"
)

/**
 * @author 2416144794@qq.com
 * @date 2023/1/13 15:54
 */

//
//
// äºŒæŒ‡è¾“å…¥æ³•å®šåˆ¶é”®ç›˜åœ¨ X-Y å¹³é¢ä¸Šçš„å¸ƒå±€å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶ä¸­æ¯ä¸ªå¤§å†™è‹±æ–‡å­—æ¯éƒ½ä½äºæŸä¸ªåæ ‡å¤„ã€‚
//
//
// ä¾‹å¦‚å­—æ¯ A ä½äºåæ ‡ (0,0)ï¼Œå­—æ¯ B ä½äºåæ ‡ (0,1)ï¼Œå­—æ¯ P ä½äºåæ ‡ (2,3) ä¸”å­—æ¯ Z ä½äºåæ ‡ (4,1)ã€‚
//
//
// ç»™ä½ ä¸€ä¸ªå¾…è¾“å…¥å­—ç¬¦ä¸² wordï¼Œè¯·ä½ è®¡ç®—å¹¶è¿”å›åœ¨ä»…ä½¿ç”¨ä¸¤æ ¹æ‰‹æŒ‡çš„æƒ…å†µä¸‹ï¼Œé”®å…¥è¯¥å­—ç¬¦ä¸²éœ€è¦çš„æœ€å°ç§»åŠ¨æ€»è·ç¦»ã€‚
//
// åæ ‡ (x1,y1) å’Œ (x2,y2) ä¹‹é—´çš„ è·ç¦» æ˜¯ |x1 - x2| + |y1 - y2|ã€‚
//
// æ³¨æ„ï¼Œä¸¤æ ¹æ‰‹æŒ‡çš„èµ·å§‹ä½ç½®æ˜¯é›¶ä»£ä»·çš„ï¼Œä¸è®¡å…¥ç§»åŠ¨æ€»è·ç¦»ã€‚ä½ çš„ä¸¤æ ¹æ‰‹æŒ‡çš„èµ·å§‹ä½ç½®ä¹Ÿä¸å¿…ä»é¦–å­—æ¯æˆ–è€…å‰ä¸¤ä¸ªå­—æ¯å¼€å§‹ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šword = "CAKE"
//è¾“å‡ºï¼š3
//è§£é‡Šï¼š
//ä½¿ç”¨ä¸¤æ ¹æ‰‹æŒ‡è¾“å…¥ "CAKE" çš„æœ€ä½³æ–¹æ¡ˆä¹‹ä¸€æ˜¯ï¼š
//æ‰‹æŒ‡ 1 åœ¨å­—æ¯ 'C' ä¸Š -> ç§»åŠ¨è·ç¦» = 0
//æ‰‹æŒ‡ 1 åœ¨å­—æ¯ 'A' ä¸Š -> ç§»åŠ¨è·ç¦» = ä»å­—æ¯ 'C' åˆ°å­—æ¯ 'A' çš„è·ç¦» = 2
//æ‰‹æŒ‡ 2 åœ¨å­—æ¯ 'K' ä¸Š -> ç§»åŠ¨è·ç¦» = 0
//æ‰‹æŒ‡ 2 åœ¨å­—æ¯ 'E' ä¸Š -> ç§»åŠ¨è·ç¦» = ä»å­—æ¯ 'K' åˆ°å­—æ¯ 'E' çš„è·ç¦»  = 1
//æ€»è·ç¦» = 3
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šword = "HAPPY"
//è¾“å‡ºï¼š6
//è§£é‡Šï¼š
//ä½¿ç”¨ä¸¤æ ¹æ‰‹æŒ‡è¾“å…¥ "HAPPY" çš„æœ€ä½³æ–¹æ¡ˆä¹‹ä¸€æ˜¯ï¼š
//æ‰‹æŒ‡ 1 åœ¨å­—æ¯ 'H' ä¸Š -> ç§»åŠ¨è·ç¦» = 0
//æ‰‹æŒ‡ 1 åœ¨å­—æ¯ 'A' ä¸Š -> ç§»åŠ¨è·ç¦» = ä»å­—æ¯ 'H' åˆ°å­—æ¯ 'A' çš„è·ç¦» = 2
//æ‰‹æŒ‡ 2 åœ¨å­—æ¯ 'P' ä¸Š -> ç§»åŠ¨è·ç¦» = 0
//æ‰‹æŒ‡ 2 åœ¨å­—æ¯ 'P' ä¸Š -> ç§»åŠ¨è·ç¦» = ä»å­—æ¯ 'P' åˆ°å­—æ¯ 'P' çš„è·ç¦» = 0
//æ‰‹æŒ‡ 1 åœ¨å­—æ¯ 'Y' ä¸Š -> ç§»åŠ¨è·ç¦» = ä»å­—æ¯ 'A' åˆ°å­—æ¯ 'Y' çš„è·ç¦» = 4
//æ€»è·ç¦» = 6
//
//
//
//
// æç¤ºï¼š
//
//
// 2 <= word.length <= 300
// æ¯ä¸ª word[i] éƒ½æ˜¯ä¸€ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ã€‚
//
//
// Related Topics å­—ç¬¦ä¸² åŠ¨æ€è§„åˆ’ ğŸ‘ 81 ğŸ‘ 0

//leetcode submit region begin(Prohibit modification and deletion)
/*
	å®šä¹‰: dp[i][j][k]è¡¨ç¤ºå½“å‰æ˜¯ç¬¬iè½®ï¼Œç¬¬ä¸€æ ¹æ‰‹æŒ‡åœ¨jå¤„ï¼Œç¬¬äºŒæ ¹æ‰‹æŒ‡åœ¨kå¤„,å…¶ä¸­ 0<=i<len(word),0<=j,k<26
	è½¬ç§»ï¼šå½“å‰æ˜¯ç¬¬iè½®ï¼Œå¯¹åº”å­—æ¯ä¸ºword[i],è®°ä¸ºwï¼Œåˆ™æœ‰ï¼š
		1. å½“å‰è½®å·¦æ‰‹ç§»åˆ°wä½ç½®ï¼Œdp[i][w][R] = min(dp[i][w][R],dp[i-1][L][R]+cal(L,w))
		2. å½“å‰è½®å³æ‰‹ç§»åˆ°wä½ç½®ï¼Œdp[i][L][w] = min(dp[i][L][w],dp[i-1][L][R]+cal(R,w))

	Base Case:
		æˆ‘ä»¬çŸ¥é“ä¸æ˜¯æ‰€æœ‰çŠ¶æ€éƒ½æ˜¯åˆæ³•çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆé»˜è®¤ç»™æ‰€æœ‰å€¼ä»˜ä¸€ä¸ªMaxIntå€¼ï¼Œè¿™æ ·å¯¹æœ€ä¼˜è§£å°±æ²¡æœ‰å½±å“
		å½“ç„¶å› ä¸ºåˆå§‹ä½ç½®ä¸ç®—è·ç¦»ï¼š
			å·¦æ‰‹åœ¨word[0]æ—¶ï¼Œdp[0][word[0]-'a'][k] = 0
			å³æ‰‹åœ¨word[0]æ—¶ï¼Œdp[0][j][word[0]-'a'] = 0
*/
func minimumDistance(word string) int {
	n := len(word)
	dp := make([][][]int, n+1)
	//åˆå§‹åŒ–
	for i := 0; i <= n; i++ {
		dp[i] = make([][]int, 26)
		for j := 0; j < 26; j++ {
			dp[i][j] = make([]int, 26)
			for k := 0; k < 26; k++ {
				if i > 0 {
					dp[i][j][k] = math.MaxInt
				}
			}
		}
	}

	res := math.MaxInt
	for i := 1; i <= n; i++ {
		w := int(word[i-1] - 'A')
		for j := 0; j < 26; j++ {
			for k := 0; k < 26; k++ {
				if dp[i-1][j][k] == math.MaxInt {
					continue
				}
				dp[i][w][k] = mathutil.MinInt(dp[i][w][k], dp[i-1][j][k]+calDistance(j, w))
				if i == n {
					res = mathutil.MinInt(res, dp[i][w][k])
					res = mathutil.MinInt(res, dp[i][j][w])
				}
			}
		}
	}
	return res
}

func calDistance(a, b int) int {
	tmp := int(math.Abs(float64(a) - float64(b)))
	return tmp/6 + tmp%6
}

//leetcode submit region end(Prohibit modification and deletion)
